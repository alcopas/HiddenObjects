#:kivy 2.2.0
<OptionsScreen>:
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Optionen'
            font_size: '24sp'

        # Music toggle button
        ToggleButton:
            id: music_button
            text: 'Musik: On' if app.game_state.music_enabled else 'Musik: Off'
            on_release: root.toggle_music()

        # Sound effects toggle button
        ToggleButton:
            id: soundfx_button
            text: 'Sound-Effekte: On' if app.game_state.soundfx_enabled else 'Sound-Effekte: Off'
            on_release: root.toggle_soundfx()

        Button:
            text: 'Zurück zum Haupmenü'
            on_release: app.root.current = 'menu'

<IntroScreen>:
    CustomCarousel:
        id: intro_carousel
        direction: 'right'
        Image:
            source: 'Verabschiedung_text_.png'
            allow_stretch: True
            keep_ratio: True
            #Damit das Bild dem Smartphone angepasst wird(ChatGPT)
        Image:
            source: 'neues_Haus_text_.png'
            allow_stretch: True
            keep_ratio: True
        Image:
            source: 'im_haus_text_.png'
            allow_stretch: True
            keep_ratio: True
        Image:
            source: 'die_Reise_beginnt_text_.png'
            allow_stretch: True
            keep_ratio: True

<MainMenuScreen>:
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Welcome to Hidden Object Game'
        Button:
            text: 'Neues Spiel'
            background_color: 0.494, 1, 0.973, 1 
            on_press: root.start_new_game()
        Button:
            id: continue_button
            text: 'Spiel fortsetzen' if not root.is_all_found() else 'Game Over'
            background_color: (0.494, 1, 0.973, 1) if not root.is_all_found() else (.5, .5, .5, 1)
            on_press: app.root.current = 'levels'
            disabled: root.is_all_found()
        Button:
            text: 'Optionen'
            background_color: 0.494, 1, 0.973, 1
            on_release: app.root.current = 'options'  # Navigate to the OptionsScreen
        
        Button:
            text: 'Exit'
            background_color: 0.494, 1, 0.973, 1 
            on_press: app.stop()

<LevelSelecterScreen>:
    BoxLayout:
        orientation: 'vertical'
        Image:
            source: 'haus_level.png' 
            allow_stretch: True
            keep_ratio: False 
            on_touch_down: root.on_house_click(*args) 

            canvas:
                
                Color:
                    rgba: root.rectangle_colors[0] if len(root.rectangle_colors) > 0 else (1, 1, 1, 1)
                Rectangle:
                    pos: self.pos[0] + 1041, self.pos[1] + 0  # Adjust position
                    size: 293, 231  # Teich

                Color:
                    rgba: root.rectangle_colors[1] if len(root.rectangle_colors) > 0 else (1, 1, 1, 1)
                Rectangle:
                    pos: self.pos[0] + 63, self.pos[1] + 368
                    size: 200, 472  # Zimmer

                Color:
                    rgba: root.rectangle_colors[1] if len(root.rectangle_colors) > 0 else (1, 1, 1, 1)
                Rectangle:
                    pos: self.pos[0] + 853, self.pos[1] + 0
                    size: 129, 290  #Garten

    AnchorLayout:  #ChatGPT, damit der Knopf rechts im Ecken ist
        anchor_x: 'right'
        anchor_y: 'top'
        Button:
            text: 'Zurück'
            size_hint: None, None
            size: 150,75
            pos_hint: {'top': 1, 'right': 1}
            on_press: root.back_button_press()
    
            
<GameScreen>:
    id: game_screen    
    BoxLayout:
        orientation: 'horizontal'
        # Game area (90% of width)
        HiddenObjectGame:
            size_hint_x: 0.9
            id: game_area

            canvas.before:
                StencilPush
                Rectangle:
                    pos: self.pos
                    size: self.size
                StencilUse


            canvas.after:
                StencilUnUse
                Rectangle:
                    pos: self.pos
                    size: self.size
                StencilPop

        # Status area (10% of width)
        BoxLayout:
            orientation: 'vertical'
            id: status_area
            size_hint_x: 0.1
            padding: 5  # Add some padding around the status items
            spacing: 5  # Add some space between status items
<OutroScreen>:
    CustomCarousel:
        id: intro_carousel
        direction: 'right'
        Image:
            source: 'Slide1.jpg'
            allow_stretch: True
            keep_ratio: True
            #Damit das Bild dem Smartphone angepasst wird(ChatGPT)
        Image:
            source: 'fest.png'
            allow_stretch: True
            keep_ratio: True
        Image:
            source: 'Slide3.jpg'
            allow_stretch: True
            keep_ratio: True
        Image:
            source: 'galaxie.gif'
            allow_stretch: True
            keep_ratio: True
